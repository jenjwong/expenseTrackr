import reducers from '../reducers';

// test reducer state is minified; beautify json for debugging: https://jsonformatter.curiousconcept.com/

test('Reducers initialize with correct state', () => {
  let state;
  state = reducers(undefined, {});
  expect(state).toEqual({ form: {}, isLoggedIn: false, expenses: [], expenseReport: {}, adminExpenses: [] });
});

test('Login form reducer handles login form input', () => {
  let state;
  state = reducers({ form: { log: { registeredFields: { email: { name: 'email', type: 'Field', count: 1 }, password: { name: 'password', type: 'Field', count: 1 } } } }, isLoggedIn: false, expenses: [], expenseReport: {}, adminExpenses: [] }, { type: '@@redux-form/CHANGE', meta: { form: 'log', field: 'email', touch: false, persistentSubmitErrors: false }, payload: 'colinrombough@gmail.com' });
  expect(state).toEqual({ form: { log: { registeredFields: { email: { name: 'email', type: 'Field', count: 1 }, password: { name: 'password', type: 'Field', count: 1 } }, values: { email: 'colinrombough@gmail.com' } } }, isLoggedIn: false, expenses: [], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle LOGIN SUCCESS', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '594878c7e6fbff3c95b8afe2', name: 'fdsfds', type: 'fds', description: 'fsdfds', amount: 3, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:22:15.735Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'GET_REPORT', report: '' });

  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '594878c7e6fbff3c95b8afe2', name: 'fdsfds', type: 'fds', description: 'fsdfds', amount: 3, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:22:15.735Z' }], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle GET_EXPENSES', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [], expenseReport: {}, adminExpenses: [] }, { type: 'GET_EXPENSES', data: { expenses: [{ _id: '594878c7e6fbff3c95b8afe2', name: 'fdsfds', type: 'fds', description: 'fsdfds', amount: 3, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:22:15.735Z' }] } });

  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '594878c7e6fbff3c95b8afe2', name: 'fdsfds', type: 'fds', description: 'fsdfds', amount: 3, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:22:15.735Z' }], expenseReport: {}, adminExpenses: [] });
});


test('Reducers handle GET_REPORT', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '59487c35cacb43452f71dcdd', name: 'sdsfs', type: 'fsdfs', description: 'fsdfs', amount: 333, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-16T07:00:00.000Z', created: '2017-06-20T01:36:53.160Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'GET_REPORT', report: '' });

  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '59487c35cacb43452f71dcdd', name: 'sdsfs', type: 'fsdfs', description: 'fsdfs', amount: 333, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-16T07:00:00.000Z', created: '2017-06-20T01:36:53.160Z' }], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle ADD_TO_DICTIONARY', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, fields: { date: { visited: true, touched: true }, name: { visited: true, touched: true }, description: { visited: true, touched: true }, type: { visited: true, touched: true }, amount: { visited: true, touched: true }, _id: { touched: true }, author: { touched: true }, created: { touched: true } }, values: { date: '2017-06-02', name: 'a', description: 'a', type: 'a', amount: '100', key: '100' }, anyTouched: true, submitSucceeded: true } }, isLoggedIn: true, expenses: [{ _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' }, { _id: '59487c35cacb43452f71dcdd', name: 'a', type: 'a', description: 'a', amount: 333, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-16T07:00:00.000Z', created: '2017-06-20T01:36:53.160Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'ADD_TO_DICTIONARY', expense: { __v: 0, name: 'a', type: 'a', description: 'a', amount: 100, author: '59482e7dec5df832b3b1c6e9', _id: '59487db4cacb43452f71dcdf', date: '2017-06-02T07:00:00.000Z', created: '2017-06-20T01:43:16.604Z' } });
  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, fields: { date: { visited: true, touched: true }, name: { visited: true, touched: true }, description: { visited: true, touched: true }, type: { visited: true, touched: true }, amount: { visited: true, touched: true }, _id: { touched: true }, author: { touched: true }, created: { touched: true } }, values: { date: '2017-06-02', name: 'a', description: 'a', type: 'a', amount: '100', key: '100' }, anyTouched: true, submitSucceeded: true } }, isLoggedIn: true, expenses: [{ __v: 0, name: 'a', type: 'a', description: 'a', amount: 100, author: '59482e7dec5df832b3b1c6e9', _id: '59487db4cacb43452f71dcdf', date: '2017-06-02T07:00:00.000Z', created: '2017-06-20T01:43:16.604Z' }, { _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' }, { _id: '59487c35cacb43452f71dcdd', name: 'a', type: 'a', description: 'a', amount: 333, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-16T07:00:00.000Z', created: '2017-06-20T01:36:53.160Z' }], expenseReport: {}, adminExpenses: [] });
});

test('Logout success', () => {
  let state;
  state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: true, expenses: [{ _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'LOGIN_SUCCESS', bool: false });
  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } } } }, isLoggedIn: false, expenses: [{ _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' }], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle DELETE_EXPENSE', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, values: { _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09', created: '2017-06-20T01:40:20.442Z' } } }, isLoggedIn: true, expenses: [{ _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'DELETE_EXPENSE', expense: { _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09T07:00:00.000Z', created: '2017-06-20T01:40:20.442Z' } });
  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, values: { _id: '59487d04cacb43452f71dcde', name: 'ret', type: 'ter', description: 'tre', amount: 100, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-09', created: '2017-06-20T01:40:20.442Z' } } }, isLoggedIn: true, expenses: [], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle GET_EXPENSES_ADMIN', () => {
  let state;
  state = reducers({ form: {}, isLoggedIn: true, expenses: [], expenseReport: {}, adminExpenses: [] }, { type: 'GET_EXPENSES_ADMIN', expenses: [{ _id: '59482e53ec5df832b3b1c6e8', name: 'modified', type: 'fas', description: 'afdsfdsaaaaaaaaa', amount: 0.2, author: '59482de6ec5df832b3b1c6e7', __v: 0, date: '2017-06-06T07:00:00.000Z', created: '2017-06-19T20:04:35.805Z' }] });
  expect(state).toEqual({ form: {}, isLoggedIn: true, expenses: [], expenseReport: {}, adminExpenses: [{ _id: '59482e53ec5df832b3b1c6e8', name: 'modified', type: 'fas', description: 'afdsfdsaaaaaaaaa', amount: 0.2, author: '59482de6ec5df832b3b1c6e7', __v: 0, date: '2017-06-06T07:00:00.000Z', created: '2017-06-19T20:04:35.805Z' }] });
});

test('Reducers handle EDIT_EXPENSE', () => {
  const state = reducers({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, values: { _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: '111', author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01', created: '2017-06-20T01:59:00.176Z', key: '2017-06-20T01:59:00.176Z' }, fields: { amount: { visited: true, touched: true }, date: { touched: true }, name: { touched: true }, description: { touched: true }, type: { touched: true }, _id: { touched: true }, author: { touched: true }, created: { touched: true } }, anyTouched: true, submitSucceeded: true } }, isLoggedIn: true, expenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 11, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'EDIT_EXPENSE', expense: { _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' } });
  expect(state).toEqual({ form: { addExpense: { registeredFields: { date: { name: 'date', type: 'Field', count: 1 }, name: { name: 'name', type: 'Field', count: 1 }, description: { name: 'description', type: 'Field', count: 1 }, type: { name: 'type', type: 'Field', count: 1 }, amount: { name: 'amount', type: 'Field', count: 1 }, _id: { name: '_id', type: 'Field', count: 1 }, author: { name: 'author', type: 'Field', count: 1 }, created: { name: 'created', type: 'Field', count: 1 } }, values: { _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: '111', author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01', created: '2017-06-20T01:59:00.176Z', key: '2017-06-20T01:59:00.176Z' }, fields: { amount: { visited: true, touched: true }, date: { touched: true }, name: { touched: true }, description: { touched: true }, type: { touched: true }, _id: { touched: true }, author: { touched: true }, created: { touched: true } }, anyTouched: true, submitSucceeded: true } }, isLoggedIn: true, expenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }], expenseReport: {}, adminExpenses: [] });
});

test('Reducers handle GET_EXPENSES_ADMIN', () => {
  const state = reducers({ form: {}, isLoggedIn: true, expenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }], expenseReport: {}, adminExpenses: [] }, { type: 'GET_EXPENSES_ADMIN', expenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }, { _id: '59482e53ec5df832b3b1c6e8', name: 'modified', type: 'fas', description: 'afdsfdsaaaaaaaaa', amount: 0.2, author: '59482de6ec5df832b3b1c6e7', __v: 0, date: '2017-06-06T07:00:00.000Z', created: '2017-06-19T20:04:35.805Z' }] });
  expect(state).toEqual({ form: {}, isLoggedIn: true, expenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }], expenseReport: {}, adminExpenses: [{ _id: '59488164cacb43452f71dce0', name: 'tre', type: 'Hello', description: 'tre', amount: 111, author: '59482e7dec5df832b3b1c6e9', __v: 0, date: '2017-06-01T07:00:00.000Z', created: '2017-06-20T01:59:00.176Z' }, { _id: '59482e53ec5df832b3b1c6e8', name: 'modified', type: 'fas', description: 'afdsfdsaaaaaaaaa', amount: 0.2, author: '59482de6ec5df832b3b1c6e7', __v: 0, date: '2017-06-06T07:00:00.000Z', created: '2017-06-19T20:04:35.805Z' }] });
});
